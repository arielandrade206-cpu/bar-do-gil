<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sistema de Comanda</title>

<style>
body{
    margin:0;
    font-family:Arial;
    background:#111;
    color:white;
}

header{
    background:#1e1e1e;
    padding:15px;
    text-align:center;
    font-size:20px;
    font-weight:bold;
}

.container{
    padding:15px;
}

input{
    width:100%;
    padding:12px;
    border:none;
    border-radius:8px;
    margin-bottom:10px;
}

button{
    padding:12px;
    border:none;
    border-radius:8px;
    cursor:pointer;
}

.btn-green{
    background:#28a745;
    color:white;
    width:100%;
    margin-bottom:10px;
}

.mesas{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(100px,1fr));
    gap:10px;
    margin-bottom:20px;
}

.mesa{
    background:#222;
    padding:20px;
    border-radius:10px;
    text-align:center;
    cursor:pointer;
    border:2px solid #333;
}

.mesa.ativa{
    border:2px solid #28a745;
}

.tabs{
    display:flex;
    gap:5px;
    margin-bottom:10px;
}

.tab{
    flex:1;
    background:#222;
    padding:10px;
    text-align:center;
    border-radius:8px;
    cursor:pointer;
}

.tab.active{
    background:#28a745;
}

.itens{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(100px,1fr));
    gap:10px;
}

.item{
    background:#222;
    padding:15px;
    border-radius:10px;
    text-align:center;
    cursor:pointer;
}

.pedido{
    margin-top:20px;
}

.pedido-item{
    display:flex;
    justify-content:space-between;
    margin-bottom:5px;
}

.total{
    margin-top:10px;
    font-weight:bold;
}
</style>
</head>
<body>

<header>üî• Sistema de Comanda</header>

<div class="container">

<input type="text" id="nomeMesa" placeholder="Nome da mesa">
<button class="btn-green" onclick="criarMesa()">Criar Mesa</button>

<div class="mesas" id="mesas"></div>

<div class="tabs">
<div class="tab active" onclick="trocarAba('bebidas',this)">Bebidas</div>
<div class="tab" onclick="trocarAba('lanches',this)">Lanches</div>
<div class="tab" onclick="trocarAba('porcoes',this)">Por√ß√µes</div>
</div>

<div class="itens" id="listaItens"></div>

<div class="pedido">
<h3>Pedido da Mesa</h3>
<div id="pedidoLista"></div>
<div class="total" id="totalMesa">Total: R$ 0.00</div>
<button class="btn-green" onclick="fecharConta()">Fechar Conta</button>
</div>

<hr>

<h3>üìú Hist√≥rico</h3>
<div id="historico"></div>
<div class="total" id="totalGeral">Total Geral: R$ 0.00</div>

</div>

<script>
let mesas = [];
let mesaAtiva = null;
let historico = [];

const cardapio = {
bebidas:[
{nome:"Coca-Cola",preco:6},
{nome:"Guaran√°",preco:6},
{nome:"√Ågua",preco:4}
],
lanches:[
{nome:"X-Burguer",preco:18},
{nome:"X-Salada",preco:20}
],
porcoes:[
{nome:"Batata Frita",preco:25},
{nome:"Calabresa",preco:30}
]
};

function criarMesa(){
let nome = document.getElementById("nomeMesa").value;
if(!nome) return alert("Digite o nome da mesa");

let mesa = {nome, pedidos:[], total:0};
mesas.push(mesa);
renderMesas();
document.getElementById("nomeMesa").value="";
}

function renderMesas(){
let div = document.getElementById("mesas");
div.innerHTML="";
mesas.forEach((mesa,index)=>{
let m = document.createElement("div");
m.className="mesa";
if(mesaAtiva===index) m.classList.add("ativa");
m.innerHTML=mesa.nome+"<br>R$ "+mesa.total.toFixed(2);
m.onclick=()=>selecionarMesa(index);
div.appendChild(m);
});
}

function selecionarMesa(index){
mesaAtiva=index;
renderMesas();
renderPedido();
}

function trocarAba(categoria,el){
document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
el.classList.add("active");
renderItens(categoria);
}

function renderItens(categoria){
let lista = document.getElementById("listaItens");
lista.innerHTML="";
cardapio[categoria].forEach(item=>{
let div=document.createElement("div");
div.className="item";
div.innerHTML=item.nome+"<br>R$ "+item.preco;
div.onclick=()=>adicionarItem(item);
lista.appendChild(div);
});
}

function adicionarItem(item){
if(mesaAtiva===null) return alert("Selecione uma mesa");
let mesa=mesas[mesaAtiva];
mesa.pedidos.push(item);
mesa.total+=item.preco;
renderPedido();
renderMesas();
}

function renderPedido(){
if(mesaAtiva===null) return;
let lista=document.getElementById("pedidoLista");
lista.innerHTML="";
let mesa=mesas[mesaAtiva];
mesa.pedidos.forEach((item,i)=>{
let div=document.createElement("div");
div.className="pedido-item";
div.innerHTML=item.nome+" - R$ "+item.preco+
" <button onclick='removerItem("+i+")'>‚ùå</button>";
lista.appendChild(div);
});
document.getElementById("totalMesa").innerText="Total: R$ "+mesa.total.toFixed(2);
}

function removerItem(i){
let mesa=mesas[mesaAtiva];
mesa.total-=mesa.pedidos[i].preco;
mesa.pedidos.splice(i,1);
renderPedido();
renderMesas();
}

function fecharConta(){
if(mesaAtiva===null) return;
let mesa=mesas[mesaAtiva];
historico.push(mesa);
mesas.splice(mesaAtiva,1);
mesaAtiva=null;
renderMesas();
renderHistorico();
document.getElementById("pedidoLista").innerHTML="";
document.getElementById("totalMesa").innerText="Total: R$ 0.00";
}

function renderHistorico(){
let div=document.getElementById("historico");
div.innerHTML="";
let totalGeral=0;
historico.forEach(m=>{
div.innerHTML+=m.nome+" - R$ "+m.total.toFixed(2)+"<br>";
totalGeral+=m.total;
});
document.getElementById("totalGeral").innerText="Total Geral: R$ "+totalGeral.toFixed(2);
}

renderItens("bebidas");
</script>

</body>
</html>
